---
import heroVideo from '../assets/hero.mp4';
import aboutMeImg from '../assets/celina-1.jpeg';
import client1 from '../assets/client-1.jpeg';
import client2 from '../assets/client-2.jpeg';
import client3 from '../assets/client-3.jpeg';
import client4 from '../assets/client-4.jpeg';
import { Image } from 'astro:assets';
import { services } from '../data/services.js'; 

import ServiceSlider from './ServicesSlider.astro';

---
<!-- Navigation -->
<nav id="navbar" class="fixed top-0 left-0 right-0 bg-white bg-opacity-90 shadow-sm z-50 transition-all duration-300">
  <div class="container mx-auto px-6 py-4 flex justify-between items-center">
    <div class="text-xl font-serif tracking-wider">The Lash Quartier</div>
    <div class="hidden md:flex space-x-8">
      <a href="#home" class="nav-link">Willkommen</a>
      <a href="#about" class="nav-link">Über uns</a>
      <a href="#services" class="nav-link">Services</a>
      <a href="#impressions" class="nav-link">Impressionen</a>
    </div>

    <!-- Mobile menu button -->
  <button id="mobile-menu-button" class="md:hidden focus:outline-none" aria-label="Menü öffnen" aria-controls="mobile-menu" aria-expanded="false">
      <i class="fas fa-bars text-xl"></i>
    </button>
  </div>

  <!-- Mobile Menu (Slide) -->
  <div id="mobile-menu" class="max-h-0 overflow-hidden transition-all duration-1000 ease md:hidden bg-white px-6 shadow-lg">
    <div class="flex flex-col space-y-4 py-4">
      <a href="#home" class="nav-link">Willkommen</a>
      <a href="#about" class="nav-link">Über uns</a>
      <a href="#services" class="nav-link">Services</a>
      <a href="#impressions" class="nav-link">Impressionen</a>
    </div>
  </div>
</nav>
<!-- Hero Section -->
<section id="home" class="relative h-[80vh] flex items-center justify-center text-center pt-20 overflow-hidden">
   <!-- Background Video -->
   <video autoplay muted loop playsinline class="absolute inset-0 w-full h-full object-cover z-0">
      <source src={heroVideo} type="video/mp4" />
      Dein Browser unterstützt keine HTML5-Videos.
   </video>
   <!-- Dark Overlay -->
   <div class="absolute inset-0 bg-black opacity-30"></div>
   <!-- Content -->
   <div class="relative z-20 max-w-3xl px-6 text-white">
      <h1 class="text-4xl md:text-6xl font-serif font-light mb-6 tracking-wider">Schönheit beginnt mit dem Blick.</h1>
      <p class="text-lg md:text-xl mb-10 font-light max-w-2xl mx-auto">Professionelle Wimpernverlängerungen, die perfekt zu dir passen und deine natürliche Ausstrahlung dezent unterstreichen.</p>
      <a href="#services" class="inline-block px-8 py-3 border border-white text-white hover:bg-white hover:text-black transition duration-300">Jetzt unsere Leistungen entdecken</a>
   </div>
</section>
<!-- About Section -->
<section id="about" class="py-20 bg-gray-50">
   <div class="container mx-auto px-6">
      <h2 class="text-3xl font-serif text-center mb-16 tracking-wider">Über Mich</h2>
      <div class="flex flex-col md:flex-row items-center gap-12">
         <div class="md:w-1/2">
            <div class="rounded-lg flex justify-center">
               <Image src={aboutMeImg} 
                  alt="Lash Technician" 
                  class="object-cover rounded-lg transition duration-500 hover:scale-105 h-[500px] w-[400px]">
            </div>
         </div>
         <div class="md:w-1/2">
            <h3 class="text-2xl font-serif mb-6">Hallo, ich bin Celina</h3>
            <p class="mb-4 leading-relaxed">Schon früh habe ich gespürt, wie sehr mich die Beauty-Welt fasziniert – nicht nur optisch, sondern auf einer tiefen, persönlichen Ebene. Schönheit ist für mich viel mehr als ein Look: Sie ist ein Gefühl. Ein Gefühl von Selbstvertrauen, Ausdruck und innerer Stärke.</p>
            <p class="mb-4 leading-relaxed">Genau deshalb habe ich TheLashQuartier gegründet – um Frauen einen Ort zu bieten, an dem sie nicht nur äußerlich verschönert, sondern auch gesehen und verstanden werden. Mir ist es besonders wichtig, auf jede Kundin individuell einzugehen und mit viel Feingefühl den Look zu kreieren, der wirklich zu ihr passt – ganz ohne Massenabfertigung, sondern mit echter Wertschätzung.</p>
            <p class="mb-6 leading-relaxed">Ich liebe es, mit Frauen zusammenzuarbeiten, sie zu verschönern und gemeinsam das Beste aus ihnen herauszuholen – authentisch, typgerecht und mit einem sicheren Gespür dafür, was ihre Persönlichkeit unterstreicht. Denn ich bin überzeugt: Beauty ist nichts Oberflächliches – sondern ein Ausdruck von Selbstliebe, Stärke und Identität.</p>
            <p class="mb-6 leading-relaxed">In meinem Studio erwartet dich ein hohes Maß an Professionalität, Sauberkeit und Qualität. Ich arbeite nur mit ausgewählten Produkten und lege besonderen Wert auf Hygiene und Präzision – weil du das verdienst.</p>
            <div class="flex space-x-4">
               <a href="https://www.instagram.com/thelashquartier/" class="text-gray-600 hover:text-gray-900" aria-label="Instagram – The Lash Quartier"><i class="fab fa-instagram text-xl"></i></a>
               <a href="https://www.tiktok.com/@thelashquartier" class="text-gray-600 hover:text-gray-900" aria-label="TikTok – The Lash Quartier"><i class="fab fa-tiktok text-xl"></i></a>
            </div>
         </div>
      </div>
   </div>
</section>
<!-- Services Section -->
<section id="services" class="py-20 bg-white overflow-hidden">
   <div class="container mx-auto px-6">
      <h2 class="text-3xl font-serif text-center mb-16 tracking-wider">Unsere Leistungen</h2>
      {services.map((cat, i) => (
      <>
      <h3 class="text-2xl font-serif mb-6">{cat.category}</h3>
      <ServiceSlider services={cat.items} id={`swiper-${i}`} />
      </>
      ))}
   </div>
</section>
<!-- Impressions Section -->
<section id="impressions" class="py-20 bg-gray-50">
   <div class="container mx-auto px-6 relative">
      <h2 class="text-3xl font-serif text-center mb-16 tracking-wider">Impressionen</h2>
      <div id="image-track" class="image-track flex flex-row" data-mouse-down-at="0" data-prev-percentage="0">
         <!-- Gallery Item 1 -->
         <div class="gallery-item rounded-lg overflow-hidden">
            <Image src={client1} 
               alt="Classic Lash Extensions" 
               draggable="false"
               class="w-full h-80 gallery-Image">
         </div>
         <!-- Gallery Item 2 -->
         <div class="gallery-item rounded-lg overflow-hidden">
            <Image src={client2} 
               alt="Volume Lash Extensions" 
               draggable="false"
               class="w-full h-80 object-cover gallery-Image">
         </div>
         <!-- Gallery Item 3 -->
         <div class="gallery-item rounded-lg overflow-hidden">
            <Image src={client3} 
               alt="Hybrid Lash Extensions" 
               draggable="false"
               class="w-full h-80 object-cover gallery-Image">
         </div>
         <!-- Gallery Item 4 -->
         <div class="gallery-item rounded-lg overflow-hidden">
            <Image src={client4} 
               alt="Before & After" 
               draggable="false"
               class="w-full h-80 object-cover gallery-Image">
         </div>
         <!-- Gallery Item 5 (Video Placeholder) -->
         <div class="gallery-item rounded-lg overflow-hidden">
        <video autoplay muted loop playsinline class="w-full h-80 object-cover gallery-Image">
          <source src={heroVideo} type="video/mp4" />
          Dein Browser unterstützt keine HTML5-Videos.
        </video>
         </div>
         <!-- Gallery Item 6 -->
         <div class="gallery-item rounded-lg overflow-hidden">
            <Image src={client1} 
               alt="Mega Volume Lashes" 
               draggable="false"
               class="w-full h-80 object-cover gallery-Image">
         </div>
      </div>
      <div class="text-center mt-12">
         <a href="https://www.instagram.com/thelashquartier/" class="inline-block px-8 py-3 border border-gray-800 text-gray-800 hover:bg-gray-800 hover:text-white transition duration-300" target="_blank" noopener noreferrer>Und noch mehr</a>
      </div>
   </div>
</section>
<!-- Footer -->
<footer class="py-12 border-t border-gray-200">
   <div class="container mx-auto px-6">
      <div class="flex flex-col items-center text-center">
         <div class="text-xl font-serif mb-6 tracking-wider text-white">The Lash Quartier</div>
         <div class="flex space-x-6 mb-6">
            <a href="https://www.instagram.com/thelashquartier/" class="text-white hover:text-gray-400 transition duration-200" aria-label="Instagram - The Lash Quartier"><i class="fab fa-instagram text-xl"></i></a>
            <a href="https://www.tiktok.com/@thelashquartier" class="text-white hover:text-gray-400 transition duration-200" aria-label="TikTok - The Lash Quartier"><i class="fab fa-tiktok text-xl"></i></a>
         </div>
         <div class="mb-4">
            <a href="mailto:thelashquartier@gmail.com" class="text-white hover:text-gray-400 transition duration-200">thelashquartier@gmail.com</a> -
            <a href="tel:004917643458300" class="text-white hover:text-gray-400 transition duration-200">(+49) 1764 3458300</a>
         </div>
         <p class="text-white text-sm">© 2025 The Lash Quartier. Alle Rechte vorbehalten.</p>
      </div>
   </div>
   <!-- Modal Overlay -->
   <div id="modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
      <!-- Modal Content -->
      <div class="bg-white rounded-lg w-[90%] relative flex flex-col">
         <div class="bg-white rounded-lg relative p-10 flex flex-col">
            <button id="closeModal" class="absolute top-10 right-10 text-gray-500 hover:text-black text-[30px]">&times;</button>
            <h2 class="text-3xl font-serif text-center mb-5 tracking-wider">Einen Termin buchen</h2>
            <p class="text-gray-600 text-center">
               Wähle deinen Wunschtermin aus den verfügbaren Zeiten.  
               Nach der Buchung erhältst du eine Bestätigung per E-Mail – ich freue mich auf dich!
            </p>
         </div>
         <iframe src="https://www.beautinda.de/book/vEariYOYZxNiMYbFskNj6Ywtvzv2/orders" frameborder="0" scrolling="yes" seamless="seamless" style="display:block; width:100%; height:80vh;"></iframe>
      </div>
   </div>
</footer>
<!-- Back to Top Button -->
<a id="back-to-top" href="#home" class="hidden fixed bottom-8 right-8 bg-gray-800 text-white w-12 h-12 rounded-full shadow-lg opacity-80 hover:opacity-100 transition-opacity duration-300 z-50 flex items-center justify-center">
<i class="fas fa-arrow-up"></i>
</a>
<script>
// Mobile Menu Toggle (Slide)
document.addEventListener('DOMContentLoaded', () => {
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');

  if (!mobileMenuButton || !mobileMenu) {
    console.warn("Mobile menu elements not found.");
    return;
  }

  let isMenuOpen = false;

  mobileMenuButton.addEventListener('click', () => {
    isMenuOpen = !isMenuOpen;

    mobileMenu.classList.toggle('max-h-0', !isMenuOpen);
    mobileMenu.classList.toggle('max-h-[400px]', isMenuOpen);
    mobileMenu.setAttribute("aria-expanded", !isMenuOpen);
  });
});
   
   // Smooth scrolling for navigation links
   document.querySelectorAll('a[href^="#"]').forEach(anchor => {
       anchor.addEventListener('click', function(e) {
           e.preventDefault();
           
           const targetId = this.getAttribute('href');
           const targetElement = document.querySelector(targetId);
           
           if (targetElement) {
               window.scrollTo({
                   top: targetElement.offsetTop - 80,
                   behavior: 'smooth'
               });
               
               // Close mobile menu if open
               mobileMenu.classList.add('hidden');
           }
       });
   });
   
   // Back to Top Button
   const backToTopButton = document.getElementById('back-to-top');
   
   window.addEventListener('scroll', () => {
       if (window.pageYOffset > 300) {
           backToTopButton.classList.remove('hidden');
       } else {
           backToTopButton.classList.add('hidden');
       }
   });
   
   
   // Navbar background change on scroll
   const navbar = document.getElementById('navbar');
   
   window.addEventListener('scroll', () => {
       if (window.pageYOffset > 50) {
           navbar.classList.add('shadow-md');
           navbar.classList.remove('bg-opacity-90');
           navbar.classList.add('bg-opacity-100');
       } else {
           navbar.classList.remove('shadow-md');
           navbar.classList.remove('bg-opacity-100');
           navbar.classList.add('bg-opacity-90');
       }
   });
   
   document.addEventListener("DOMContentLoaded", () => {
   const modal = document.getElementById("modal");
   const openBtnsHTMLElement = document.getElementsByClassName("modal");
   const closeBtn = document.getElementById("closeModal");

  const openBtns = [...openBtnsHTMLElement];

  for (const openBtn of openBtns) {
     openBtn.addEventListener("click", (e) => {
       e.preventDefault();
       modal.classList.remove("hidden");
     });
  }
   
   closeBtn.addEventListener("click", () => {
   modal.classList.add("hidden");
   });
   
   // Optional: close modal when clicking outside of it
   modal.addEventListener("click", (e) => {
   if (e.target === modal) {
   modal.classList.add("hidden");
   }
   });
   });
const track = document.getElementById("image-track");
const impressions = document.getElementById("impressions");

const handleOnDown = e => {
  track.dataset.mouseDownAt = e.clientX;
};

const handleOnUp = () => {
  track.dataset.mouseDownAt = "0";  
  track.dataset.prevPercentage = track.dataset.percentage;
};

const handleOnMove = e => {
  if (track.dataset.mouseDownAt === "0") return;

  const mouseDelta = parseFloat(track.dataset.mouseDownAt) - e.clientX;
  const maxDelta = window.innerWidth / 2;

  // Sensitivity factor: lower = less extreme movement
  const sensitivity = window.innerWidth < 1000 ? 0.5 : 1;

  const percentage = (mouseDelta / maxDelta) * -100 * sensitivity;
  const nextPercentageUnconstrained = parseFloat(track.dataset.prevPercentage || "0") + percentage;
  const nextPercentage = Math.max(Math.min(nextPercentageUnconstrained, 0), -100);

  track.dataset.percentage = nextPercentage;

  track.animate({
    transform: `translate(${nextPercentage}%, -50%)`
  }, { duration: 1200, fill: "forwards" });

  for (const image of track.getElementsByClassName("gallery-Image")) {
    image.animate({
      objectPosition: `${100 + nextPercentage}% center`
    }, { duration: 1200, fill: "forwards" });
  }
};

// Attach events to #impressions instead of window
impressions.addEventListener("mousedown", e => handleOnDown(e));
impressions.addEventListener("touchstart", e => handleOnDown(e.touches[0]));

impressions.addEventListener("mouseup", e => handleOnUp(e));
impressions.addEventListener("touchend", e => handleOnUp(e.touches[0]));

impressions.addEventListener("mousemove", e => handleOnMove(e));
impressions.addEventListener("touchmove", e => handleOnMove(e.touches[0]));
</script>
